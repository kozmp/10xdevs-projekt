---
/**
 * Demo Page for RichTextEditor Component
 *
 * Strona demonstracyjna pokazująca działanie komponentu RichTextEditor
 * bez integracji z API (ETAP 3 - tylko UI)
 */
import Layout from "../layouts/Layout.astro";
---

<Layout title="Rich Text Editor - Demo">
  <main class="container mx-auto py-8 px-4">
    <div class="max-w-4xl mx-auto space-y-8">
      <header class="space-y-2">
        <h1 class="text-3xl font-bold">Rich Text Editor - Demo</h1>
        <p class="text-muted-foreground">
          Demonstracja komponentu edytora opisów produktów (ETAP 3 - UI bez integracji API)
        </p>
      </header>

      <div id="editor-demo-container">
        <!-- React component will be rendered here -->
      </div>

      <section class="space-y-4 border-t pt-8">
        <h2 class="text-2xl font-semibold">Funkcje edytora:</h2>
        <ul class="list-disc list-inside space-y-2 text-muted-foreground">
          <li><strong>Formatowanie tekstu:</strong> Pogrubienie, kursywa, kod inline</li>
          <li><strong>Nagłówki:</strong> H2, H3 dla struktury opisu</li>
          <li><strong>Listy:</strong> Punktowane i numerowane</li>
          <li><strong>Cytaty:</strong> Blokowe cytaty dla wyróżnienia</li>
          <li><strong>Separator:</strong> Linia pozioma dla podziału sekcji</li>
          <li><strong>Historia:</strong> Cofnij/Ponów (Ctrl+Z / Ctrl+Y)</li>
          <li><strong>Licznik znaków:</strong> Wizualna informacja o limicie (0/50000)</li>
          <li><strong>Accessibility:</strong> ARIA labels, keyboard shortcuts, screen reader support</li>
        </ul>
      </section>
    </div>
  </main>
</Layout>

<script>
  import React from "react";
  import { createRoot } from "react-dom/client";
  import { RichTextEditor } from "../components/RichTextEditor";

  // Demo component with state management
  function EditorDemo() {
    const [content, setContent] = React.useState(
      "<p>Witaj w edytorze opisów produktów! Możesz używać różnych formatowań, aby stworzyć atrakcyjny opis.</p><h2>Funkcje produktu</h2><ul><li>Wysokiej jakości materiały</li><li>Długi czas użytkowania</li><li>Przyjazny dla środowiska</li></ul>"
    );
    const [showOutput, setShowOutput] = React.useState(false);

    return React.createElement(
      "div",
      { className: "space-y-6" },
      React.createElement(RichTextEditor, {
        initialContent: content,
        onChange: (html) => setContent(html),
        placeholder: "Zacznij pisać opis produktu...",
        label: "Opis produktu",
      }),
      React.createElement(
        "div",
        { className: "flex items-center gap-4" },
        React.createElement(
          "button",
          {
            onClick: () => setShowOutput(!showOutput),
            className: "px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",
          },
          showOutput ? "Ukryj" : "Pokaż",
          " HTML Output"
        ),
        React.createElement(
          "button",
          {
            onClick: () => {
              setContent("");
              window.location.reload();
            },
            className:
              "px-4 py-2 bg-secondary text-secondary-foreground rounded-md hover:bg-secondary/90 transition-colors",
          },
          "Wyczyść edytor"
        )
      ),
      showOutput &&
        React.createElement(
          "div",
          { className: "border rounded-lg p-4 bg-muted/50" },
          React.createElement("h3", { className: "text-lg font-semibold mb-2" }, "HTML Output:"),
          React.createElement(
            "pre",
            { className: "text-sm overflow-x-auto bg-background p-3 rounded border" },
            React.createElement("code", null, content)
          )
        )
    );
  }

  // Mount React component
  const container = document.getElementById("editor-demo-container");
  if (container) {
    const root = createRoot(container);
    root.render(React.createElement(EditorDemo));
  }
</script>

<style>
  /* Additional demo page styles */
  .container {
    min-height: 100vh;
  }
</style>
